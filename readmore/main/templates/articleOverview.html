{% extends "base_page.html" %}

{% load staticfiles %}

{% block extraCSS %}
    <link href="{% static 'css/articleOverview.css' %}" rel="stylesheet">
{% endblock %}

{% block menu %}

        <a href="/accounts/profile/"><button type="submit">Profiel</button></a>
        <form method="post" action="{% url 'account_logout' %}">
            {% csrf_token %}
            {% if redirect_field_value %}
                <input type="hidden" name="{{redirect_field_name}}" value="{{redirect_field_value}}"/>
            {% endif %}
            <button type="submit">Log out</button>
        </form>

{% endblock %}
{% block body %}
    <div class="currentcategory">
        <h1 class="leading"> <span id="categorytitle">Recente</span> artikelen </h1>
    </div>
    <div id="search_articles">
        <form id="searchForm">
        <input id="search" type="text" name="q" placeholder="Zoek in artikelen"></input><button type="submit">Zoek</button>
        </form>
    </div>
    <div class="isotope" id="articles">

    </div>

    <h3> Niks gevonden? Kies een categorie uit het menu in de onderbalk </h3>
{% endblock %}
    
{% block footer %}       
    <div id="filters"class="buttonHolder">
        <div class="btn" id="morecategories">
        <h4>Meer</h4> <a type="button"></a></div>
        <div class="btn"><h4>Recent</h4>
        <a type="button"
		    href="#category/recent" id="category-recent"
            data-url="{% url 'content_query' %}"
            data-filter="*"></a>
        </div>
        {% for category in categories %}
           <div class="btn"><h4>{{category.title}}</h4>
            <a type="button"
			    href='#category/{{category.id}}'
			    id="category-{{category.id}}"
			    data-filter="{{category.title}}"
			    data-url="{{category.get_absolute_url}}"
		    ></a></div>
        {% endfor %}
    </div>
{% endblock %}


{% block extraScripts %}
	<script src={% static "js/isotope.pkgd.min.js"%}></script>
	<script src={% static "js/filteringIsotope.js"%}></script>
	<!-- jquery mobile for hashchange event -->
    <script src={% static 'js/jquery.mobile.custom.min.js' %}></script>
	<script src={% static "js/loader.js"%}></script>

	<script>
	    $( function(){
		    loader = new Loader("#articles");
		    if(location.hash == ""){
			    location.hash = 'category/recent';
            } else {
                loader.update();
            }
        });

        $('#morecategories').click(function(){
            if($('.footer').hasClass('open')){
                $('.footer').removeClass('open');
                this.firstElementChild.innerHTML = "Meer"
            } else{
                $('.footer').addClass('open');
                this.firstElementChild.innerHTML = "Minder"
            }
        });
	</script>
{% endblock %}
